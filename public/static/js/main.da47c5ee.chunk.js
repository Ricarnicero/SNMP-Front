(window.webpackJsonpservidor_snmp=window.webpackJsonpservidor_snmp||[]).push([[0],{172:function(e,t,a){e.exports=a(368)},177:function(e,t,a){},178:function(e,t,a){},368:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(57),c=a.n(i),o=(a(177),a(10)),s=a(11),l=a(13),d=a(12),u=a(14),m=(a(178),a(18)),v=a.n(m),h=(a(188),a(29)),p=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).onClickZoomIn=function(e){a.state.count>5&&a.setState((function(e,t){return{count:e.count-1}}),(function(){a.getActivity(a.state.serverid,a.state.oid,a.state.count)}))},a.onClickZoomOut=function(e){a.state.count<25&&a.setState((function(e,t){return{count:e.count+1}}),(function(){a.getActivity(a.state.serverid,a.state.oid,a.state.count)}))},a.getZoomPerc=function(){var e=500/a.state.count;return Math.ceil(e)+"%"},a.db=Object(m.firestore)(),a.state={data:[{}],serverid:" ",oid:" ",count:25,ref:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(e,t){return{serverid:t.serverid,oid:t.oid}}),(function(){e.getActivity(e.state.serverid,e.state.oid,e.state.count)}))}},{key:"setDataState",value:function(e,t){this.setState({data:e,ref:t})}},{key:"setDataState",value:function(e){this.setState({data:e})}},{key:"getActivity",value:function(e,t,a){var n,r=this,i=[];try{this.db.collection("Servidores").doc(e).collection("Registros").where("oidName","==",t).orderBy("date","desc").limit(a).get().then((function(e){e.forEach((function(e){var t=e.data().date.toDate();i.push({value:e.data().value,date:t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}),n=e.data().refvalue})),i&&n?r.setDataState(i.reverse(),n):i&&r.setDataState(i.reverse())}))}catch(c){console.error(c)}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-12 col-md-6 my-3"},r.a.createElement("div",{className:"card mx"},r.a.createElement("h3",{className:"text-center"},this.props.name),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("button",{onClick:this.onClickZoomOut},r.a.createElement("span",null,"\u2796"))),r.a.createElement("div",{className:"col"},"Zoom: ",this.getZoomPerc()),r.a.createElement("div",{className:"col"},r.a.createElement("button",{onClick:this.onClickZoomIn},r.a.createElement("span",null,"\u2795")))),r.a.createElement("div",{style:{width:"100%",height:300}},r.a.createElement(h.d,null,r.a.createElement(h.b,{height:250,data:this.state.data},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0}))),r.a.createElement(h.f,{dataKey:"date"}),r.a.createElement(h.g,{type:"number",domain:[0,function(t){return e.state.ref?e.state.ref:2*t}]}),r.a.createElement(h.c,{strokeDasharray:"3 3"}),r.a.createElement(h.e,null),r.a.createElement(h.a,{type:"monotone",dataKey:"value",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorUv)"}))))))}}]),t}(n.Component);p.jsfiddleUrl="https://jsfiddle.net/alidingling/xqjtetw0/";var f=p,b=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).getAllData=function(){e.db.collection("Servidores").doc(e.state.serverid).get().then((function(t){e.setState({data:t.data(),serverid:t.id})})),e.db.collection("OIDS").where("once","==",!1).get().then((function(t){var a=[];t.forEach((function(e){a.push(e.data().nombre)})),e.setState({oids:a})}))},e.db=Object(m.firestore)(),e.state={data:[],oids:[],serverid:" "},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(e,t){return{serverid:t.serverid}}),(function(){e.getAllData(),setInterval((function(){e.getAllData()}),6e4)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container text-center"},r.a.createElement("h1",null,this.state.data.alias),r.a.createElement("div",{className:"row my-1"},r.a.createElement("b",null,"ubicacion:")," ",this.state.data.ubicacion),r.a.createElement("div",{className:"row my-1"},r.a.createElement("b",null,"Tiempo corriendo el sistema:")," ",this.state.data.tiempo_sistema_encendido),r.a.createElement("div",{className:"row my-1"},r.a.createElement("b",null,"Contaco:")," ",this.state.data.contacto),r.a.createElement("div",{className:"row my-1"},r.a.createElement("b",null,"Sistema Opertivo y hora:")," ",this.state.data.sistema_operativo),r.a.createElement("div",{className:"row my-1"},this.state.oids.map((function(t){return r.a.createElement(f,{key:t,name:t,oid:t,serverid:e.state.serverid})}))))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={serverid:" ",alias:" ",ip:" "},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState((function(e,t){return{serverid:t.serverid,alias:t.alias,ip:t.ip}}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-12 col-md-6 border rounded-lg"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h3",null,this.state.alias),r.a.createElement("p",null,this.state.ip)),r.a.createElement("div",{className:"text-right"},r.a.createElement("a",{href:window.location.href.toString().replace("?","")+"?serverid=".concat(this.state.serverid)},"Ir \ud83d\udc49")))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={data:[]},a.db=Object(m.firestore)(),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.db.collection("Servidores").onSnapshot((function(t){var a=[];t.forEach((function(e){a.push({alias:e.data().alias,serverid:e.id,ip:e.data().ip})})),e.setState({data:a})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"my-3 mx-auto text-center"},r.a.createElement("h2",null,"Servidores monitoreados")),r.a.createElement("div",{className:"row"},this.state.data.map((function(e){return r.a.createElement(E,{key:e.serverid,serverid:e.serverid,alias:e.alias,ip:e.ip})}))))}}]),t}(n.Component),g=a(146),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.createServer(a.state.ip,a.state.comunidad,a.state.alias)},a.handleChange=function(e){a.setState(Object(g.a)({},e.target.name,e.target.value))},a.db=Object(m.firestore)(),a.state={error:" ",alias:" ",ip:" ",comunidad:" "},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"createServer",value:function(e,t,a){this.db.collection("Servidores").add({ip:e,comunidad:t,alias:a}).catch((function(e){alert("Hubo error en: ".concat(e))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"my-3 mx-auto text-center"},r.a.createElement("h2",null,"Monitorear nuevo servidor")),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Servidor")),r.a.createElement("input",{type:"text",name:"alias",className:"form-control",placeholder:"Alias",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"ip",className:"form-control",placeholder:"IP",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"comunidad",className:"form-control",placeholder:"Comunidad",onChange:this.handleChange}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-success",type:"submit"},"Registrar")))),r.a.createElement("div",{className:"text-center"},this.state.error))}}]),t}(n.Component);v.a.initializeApp({apiKey:"AIzaSyApzaUbCad-8VciNeuH1UTSkCrAct8Tn2o",authDomain:"redes3snmp.firebaseapp.com",databaseURL:"https://redes3snmp.firebaseio.com",projectId:"redes3snmp",storageBucket:"",messagingSenderId:"155892603157",appId:"1:155892603157:web:eafc893180ac8936b9711c"});var j=function(e){function t(){var e;Object(o.a)(this,t),e=Object(l.a)(this,Object(d.a)(t).call(this));var a=new window.URLSearchParams(window.location.search);return e.serverid=a.get("serverid"),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.serverid?r.a.createElement(b,{serverid:this.serverid}):r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement(y,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[172,1,2]]]);
//# sourceMappingURL=main.da47c5ee.chunk.js.map